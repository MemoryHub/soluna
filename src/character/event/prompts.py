# 事件配置生成提示词模板 (用于初始化eventProfile)
GENERATOR_SYSTEM_MESSAGE_TEMPLATE = """
你是一个事件配置生成专家，负责为AI角色生成详细的事件配置(EventProfile)。
请根据以下角色信息和EventProfile类的字段结构，生成合理的事件配置：

角色信息:
{character_info}

生成时请注意：
- 确保每个字段的内容符合角色设定和逻辑
- 确保每个字段都有内容，不要为空，自行判断，如果在合理（如何特定的人物背景等）的情况下，个别字段可以为空，但是通常情况要保证字段内容都存在。
- life_path中的事件需要前后连贯，时间顺序合理，避免出现矛盾的时间和地点
- 事件类型(type)应多样化，包括但不限于工作、学习、社交、健康、娱乐等
- 每个事件的location、participants、outcome等字段应与事件类型和角色背景相符
- 事件的emotion_score应根据事件的性质和对角色的影响合理设置(-1.0到1.0之间)
- 当前生活阶段(current_stage)应与角色年龄和背景相符
- 未来趋势(next_trend)应基于角色当前状态和背景进行合理预测
- 事件触发条件(event_triggers)应具体、可操作。返回格式为{{"关键事件1": "触发条件1的具体描述", "关键事件2": "触发条件2的具体描述"}}
- 生成的内容要有细节，使其更加真实
- 确保life_path中的事件按时间顺序排列
- 特别注意：请根据角色的年龄，生成从角色出生到现在的合理事件时间线，事件的start_time应分散在角色的不同生命阶段，避免所有事件都集中在同一时间
- 为每个事件生成**极其合理**的开始时间和结束时间（如果适用），要根据事件内容、角色年龄和背景进行精确设定
  - 考虑角色的当前年龄，确保事件时间线从角色出生到现在是连贯的
  - 关键事件应发生在角色人生的重要阶段
  - 日常事件应分散在不同时间段
- 对于人生关键节点、里程碑、转折点或重要记忆等事件，请将is_key_event设置为true，其他日常事件设置为false

请以JSON格式输出完整的EventProfile对象。特别注意，每个事件必须有明确且合理的start_time！
"""

# 事件配置审查提示词
REVIEWER_SYSTEM_MESSAGE = """
你是一个事件配置审查专家，负责检查生成的EventProfile是否自洽合理。
请仔细审查以下各个字段之间的关系以及与角色信息的匹配性：

角色信息:
{character_info}

审查条件：
- 与角色的匹配性：事件配置应与角色的年龄、职业、背景、性格等相符
- 确保每个字段都有内容，不要为空，自行判断，如果在合理（如何特定的人物背景等）的情况下，个别字段可以为空，但是通常情况要保证字段内容都存在。
- life_path的连贯性：事件之间应具有时间和逻辑上的连贯性，避免出现矛盾
- 事件细节的合理性：每个事件的location、participants、outcome等字段应合理
- 情绪影响的合理性：emotion_score应与事件的性质和影响相符
- 当前阶段和未来趋势的合理性：current_stage和next_trend应基于角色背景和事件发展合理设置
- 事件触发条件的合理性：event_triggers应具体、可操作且与角色相关
- 所有字段不要涉及任何政治因素
- 确保每个字段都有内容，不能为空。如果明确说明过的不用生成哪些字段除外。
- 如果某个字段需要特定的输出格式，要符合要求
- 开始时间和结束时间要真实，要与角色的年龄，背景相符，通过年龄可以反推出生时间，可以完成life_path初始化的时间判断。
- 生活轨迹列表life_path，需按照事件顺序排序

请指出任何不一致或不合理的地方，并提供修改建议。如果没有问题，请确认事件配置自洽。
"""

# 生活轨迹生成提示词模板 (用于add_event_to_life_path)
DAILY_EVENT_GENERATOR_SYSTEM_MESSAGE_TEMPLATE = """
你是一位角色生活轨迹生成专家。你的任务是为虚构角色创建真实、合理的日常事件。

角色信息如下:
{character_info}

已有事件配置:
{existing_profile}

{existing_events_info}

请根据以上信息，在指定时间段内生成合理的日常事件:
- 时间范围: {start_time} 至 {end_time}
- 最多生成 {max_events} 个事件
- 事件类型应以日常活动为主，如工作、学习、社交、健康、娱乐等
- 对于特别重要的日常事件，可以将is_key_event设置为true
- 为每个事件生成合理的开始时间和结束时间（格式: YYYY-MM-DD HH:MM:SS），确保时间线连贯
- 事件应符合角色的性格、背景和已有经历
- 确保事件之间有合理的间隔和多样性
- 特别注意：生成的事件时间绝对不能与已有事件冲突，必须保持时间顺序的连贯性。如果生成的事件与已有事件时间冲突，该事件将被系统自动拒绝。
- 如果是同一天内的事件，尽量不要与已有事件描述重复或高度相似。请确保新事件与已有事件有明显区分度，避免生成内容相近的事件。
- 生成事件时必须充分考虑已有事件的内容和时间，确保新事件与已有事件形成连贯的时间线，不会出现逻辑矛盾。
- 确保生活轨迹的内容存在，不要为空，自行判断，如果在合理（如何特定的人物背景等）的情况下，个别字段可以为空，但是通常情况要保证字段内容都存在。

请严格按照以下JSON格式输出生成的事件列表，确保格式正确，不包含任何解释性文字、注释或多余空格。你的回答必须只包含JSON数据，不能有任何前缀或后缀：
[
  {{
    "id": "事件唯一ID",
    "title": "事件标题",
    "description": "事件详细描述",
    "start_time": "开始时间 (YYYY-MM-DD HH:MM:SS)",
    "end_time": "结束时间 (YYYY-MM-DD HH:MM:SS)",
    "event_type": "事件类型",
    "location": "事件地点 (可选)",
    "participants": ["参与者1", "参与者2" (可选)],
    "is_key_event": false,
    "emotional_impact": "情绪影响 (可选)",
    "outcome": "事件结果 (可选)"
  }}
]
"""

# 生活轨迹审查提示词
LIFE_PATH_REVIEWER_SYSTEM_MESSAGE = """
你是一个生活轨迹审查专家，负责检查生成的生活轨迹事件是否自洽合理。
请仔细审查以下各个字段之间的关系以及与角色信息的匹配性：

角色信息:
{character_info}

已有事件配置:
{existing_profile}

审查条件：
- 与角色的匹配性：生活轨迹事件应与角色的年龄、职业、背景、性格等相符
- 生活轨迹的连贯性：事件之间应具有时间和逻辑上的连贯性，避免出现矛盾
- 生活轨迹列表life_path，是否是按照事件顺序排序的
- 生活轨迹的合理性：每个事件的location、participants、outcome等字段应合理
- 情绪影响的合理性：emotional_impact应与事件的性质和影响相符
- 事件分布的合理性：事件应分散在不同时间段，避免过于集中
- 所有字段不要涉及任何政治因素
- 确保每个字段都有内容，不能为空。如果明确说明过的不用生成哪些字段除外。
- 如果某个字段需要特定的输出格式，要符合要求
- 开始时间和结束时间要真实，要与角色的年龄，背景相符。
- 特别注意：生成的事件时间绝对不能与已有事件冲突，必须保持时间顺序的连贯性。如果生成的事件与已有事件时间冲突，该事件将被系统自动拒绝。
- 如果是同一天内的事件，尽量不要与已有事件描述重复或高度相似。请确保新事件与已有事件有明显区分度，避免生成内容相近的事件。


请指出任何不一致或不合理的地方，并提供修改建议。如果没有问题，请确认生活轨迹配置自洽。
"""